import { Http, Response, ResponseOptions,Headers } from '@angular/http';
import { Injectable } from '@angular/core';
import { Employee } from './employee';
import { Observable } from 'rxjs/Observable';
import 'rxjs/add/operator/map';
import 'rxjs/add/operator/catch';


@Injectable()
export class EmployeeService {

  constructor(private _httpService : Http) { }

  getAllEmployees(): Observable<Employee[]>{
    return this._httpService.get("http://localhost:8091/viewEmployees")
    .map((response:Response)=> response.json())
    .catch(this.handleError);

  }

 private handleError(error:Response){
   return Observable.throw(error);

  }
}


export class Employee{
  empId:string;
  name:string;
  designation:string;
  salary:number;
}


import { Component, OnInit } from '@angular/core';
import { Employee } from './employee';
import {EmployeeService} from './employee.service';

@Component({
  selector: 'app-employee',
  templateUrl: './employee.component.html',
  styleUrls: ['./employee.component.css']
})
export class EmployeeComponent implements OnInit {


  employees:Employee[];
   
  constructor(private _employeeService: EmployeeService) { }

  getEmployees():void{
    this._employeeService.getAllEmployees()
    .subscribe((empData)=>{this.employees=empData, console.log(empData)},
    (error)=>{
      console.log(error)
    });
  }

  ngOnInit():void {
    this.getEmployees();
  }

}